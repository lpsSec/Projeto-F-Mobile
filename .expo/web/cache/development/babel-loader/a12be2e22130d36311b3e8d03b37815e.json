{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\lucas\\\\Documents\\\\Programacao\\\\React-Native\\\\Project-E-MyBook\\\\src\\\\pages\\\\sub-pages\\\\searchBook.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport BookAdmin from \"../../components/BookAdmin\";\nimport Api from \"../../Api\";\nimport Search from \"../../assets/search.svg\";\nimport NotFound from \"../../assets/nao-encontrado.svg\";\n\nvar wait = function wait(timeout) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, timeout);\n  });\n};\n\nexport default function searchBook() {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      list = _useState2[0],\n      setList = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      searchFiled = _useState6[0],\n      setSearchField = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      userFiled = _useState8[0],\n      setUserField = _useState8[1];\n\n  var _useState9 = useState('none'),\n      _useState10 = _slicedToArray(_useState9, 2),\n      messageEmpty = _useState10[0],\n      setMessageEmpty = _useState10[1];\n\n  var _useState11 = useState('none'),\n      _useState12 = _slicedToArray(_useState11, 2),\n      searchEmpty = _useState12[0],\n      setSearchEmpty = _useState12[1];\n\n  var _useState13 = useState('none'),\n      _useState14 = _slicedToArray(_useState13, 2),\n      userEmpty = _useState14[0],\n      setUserEmpty = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      refreshing = _useState16[0],\n      setRefreshing = _useState16[1];\n\n  var onRefresh = React.useCallback(function () {\n    setRefreshing(true);\n    Api.getBookLocates().then(function (response) {\n      if (response.data[0] != null) {\n        setList(response.data);\n        setMessageEmpty('none');\n      } else {\n        setList([]);\n        setMessageEmpty('flex');\n        wait(2000).then(function () {\n          setMessageEmpty('none');\n        });\n      }\n    }).catch(function (error) {\n      alert('Erro inesperado, contate o adminstrador');\n    });\n    wait(2000).then(function () {\n      return setRefreshing(false);\n    });\n  }, []);\n\n  var byBook = function byBook() {\n    var json;\n    return _regeneratorRuntime.async(function byBook$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(searchFiled != '')) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(Api.getBookLocatesByBookName(searchFiled));\n\n          case 3:\n            json = _context.sent;\n\n            if (json.data[0] != null) {\n              setList(json.data);\n              setMessageEmpty('none');\n            } else {\n              setList([]);\n              setMessageEmpty('flex');\n            }\n\n            _context.next = 9;\n            break;\n\n          case 7:\n            setSearchEmpty('flex');\n            wait(2000).then(function () {\n              setSearchEmpty('none');\n            });\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var byUser = function byUser() {\n    var json;\n    return _regeneratorRuntime.async(function byUser$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(userFiled != '')) {\n              _context2.next = 7;\n              break;\n            }\n\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(Api.getBookLocatesByUserName(userFiled));\n\n          case 3:\n            json = _context2.sent;\n\n            if (json.data[0] != null) {\n              setList(json.data);\n              setMessageEmpty('none');\n            } else {\n              setList([]);\n              setMessageEmpty('flex');\n            }\n\n            _context2.next = 9;\n            break;\n\n          case 7:\n            setUserEmpty('flex');\n            wait(2000).then(function () {\n              setUserEmpty('none');\n            });\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    var isFlag = true;\n    Api.getBookLocates().then(function (response) {\n      if (isFlag) {\n        if (response.data[0] != null) {\n          setList(response.data);\n          setMessageEmpty('none');\n        } else {\n          setList([]);\n          setMessageEmpty('flex');\n        }\n      }\n    }).catch(function (error) {\n      alert('Erro inesperado, contate o adminstrador');\n    });\n    return function () {\n      isFlag = false;\n    };\n  }, []);\n  return React.createElement(ScrollView, {\n    contentContainerStyle: {\n      flexGrow: 1,\n      justifyContent: 'space-around',\n      alignItems: 'center',\n      backgroundColor: '#FFFFFF'\n    },\n    horizontal: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.pageBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: {\n      display: searchEmpty,\n      color: '#000000',\n      fontWeight: 'bold',\n      marginBottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, \"Digite o nome do livro que deseja...\"), React.createElement(Text, {\n    style: {\n      display: userEmpty,\n      color: '#000000',\n      fontWeight: 'bold',\n      marginBottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, \"Digite o nome do usu\\xE1rio que deseja...\"), React.createElement(View, {\n    style: styles.inputArea,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, React.createElement(TextInput, {\n    style: styles.input,\n    placeholder: \"Pesquisar por livro\",\n    placeholderTextColor: \"#000000\",\n    value: searchFiled,\n    onChangeText: function onChangeText(t) {\n      return setSearchField(t);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: styles.search,\n    onPress: byBook,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, React.createElement(Search, {\n    width: \"24\",\n    height: \"24\",\n    fill: \"#000000\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 25\n    }\n  }))), React.createElement(View, {\n    style: styles.inputArea,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, React.createElement(TextInput, {\n    style: styles.input,\n    placeholder: \"Pesquisar por usu\\xE1rio\",\n    placeholderTextColor: \"#000000\",\n    value: userFiled,\n    onChangeText: function onChangeText(t) {\n      return setUserField(t);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: styles.search,\n    onPress: byUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, React.createElement(Search, {\n    width: \"24\",\n    height: \"24\",\n    fill: \"#000000\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }))), React.createElement(ScrollView, {\n    contentContainerStyle: {\n      flexGrow: 1,\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      backgroundColor: '#FFFFFF'\n    },\n    horizontal: false,\n    refreshControl: React.createElement(RefreshControl, {\n      refreshing: refreshing,\n      onRefresh: onRefresh,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, loading && React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#000000\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 25\n    }\n  }), React.createElement(View, {\n    style: styles.listArea,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }, list.map(function (item, k) {\n    return React.createElement(BookAdmin, {\n      key: k,\n      data: item,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 29\n      }\n    });\n  })), React.createElement(View, {\n    style: [styles.messageNotFound, {\n      display: messageEmpty\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, React.createElement(NotFound, {\n    width: \"60\",\n    height: \"60\",\n    fill: \"#FFFFFF\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }), React.createElement(Text, {\n    style: {\n      color: '#000000',\n      fontWeight: 'bold',\n      fontSize: 16,\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, \"Busca n\\xE3o encontrada\")))));\n}\n;\nvar styles = StyleSheet.create({\n  pageBody: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'space-around',\n    backgroundColor: '#FFFFFF'\n  },\n  inputArea: {\n    width: 400,\n    height: 40,\n    backgroundColor: '#F5F5F5',\n    flexDirection: 'row',\n    borderRadius: 10,\n    paddingLeft: 15,\n    alignItems: 'center',\n    marginBottom: 10,\n    borderWidth: 2,\n    borderColor: '#000000'\n  },\n  input: {\n    flex: 1,\n    fontSize: 16,\n    color: '#000000',\n    marginLeft: 5\n  },\n  search: {\n    width: 24,\n    height: 24,\n    marginRight: 10\n  },\n  listArea: {\n    width: 400\n  },\n  messageNotFound: {\n    width: 300,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"sources":["C:/Users/lucas/Documents/Programacao/React-Native/Project-E-MyBook/src/pages/sub-pages/searchBook.js"],"names":["React","useState","useEffect","BookAdmin","Api","Search","NotFound","wait","timeout","Promise","resolve","setTimeout","searchBook","list","setList","loading","setLoading","searchFiled","setSearchField","userFiled","setUserField","messageEmpty","setMessageEmpty","searchEmpty","setSearchEmpty","userEmpty","setUserEmpty","refreshing","setRefreshing","onRefresh","useCallback","getBookLocates","then","response","data","catch","error","alert","byBook","getBookLocatesByBookName","json","byUser","getBookLocatesByUserName","isFlag","flexGrow","justifyContent","alignItems","backgroundColor","styles","pageBody","display","color","fontWeight","marginBottom","inputArea","input","t","search","listArea","map","item","k","messageNotFound","fontSize","marginTop","StyleSheet","create","flex","width","height","flexDirection","borderRadius","paddingLeft","borderWidth","borderColor","marginLeft","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, TouchableOpacity, TextInput, ActivityIndicator, RefreshControl, ScrollView, StyleSheet } from 'react-native';\r\nimport BookAdmin from '../../components/BookAdmin';\r\nimport Api from '../../Api';\r\nimport Search from '../../assets/search.svg';\r\nimport NotFound from '../../assets/nao-encontrado.svg';\r\n\r\nconst wait = (timeout) => {\r\n    return new Promise(resolve => setTimeout(resolve, timeout));\r\n}\r\n\r\nexport default function searchBook() {\r\n\r\n    const [list, setList] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [searchFiled, setSearchField] = useState('');\r\n    const [userFiled, setUserField] = useState('');\r\n    const [messageEmpty, setMessageEmpty] = useState('none');\r\n    const [searchEmpty, setSearchEmpty] = useState('none');\r\n    const [userEmpty, setUserEmpty] = useState('none');\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    const onRefresh = React.useCallback(() => {\r\n        setRefreshing(true);\r\n        Api.getBookLocates().then((response) => {\r\n            if(response.data[0] != null) {\r\n                setList(response.data);\r\n                setMessageEmpty('none');\r\n            }\r\n            else {\r\n                setList([]);\r\n                setMessageEmpty('flex');\r\n                wait(2000).then(()=>{ setMessageEmpty('none') })\r\n            }\r\n        }).catch((error) => {\r\n            alert('Erro inesperado, contate o adminstrador');\r\n        });\r\n        wait(2000).then(() => setRefreshing(false));\r\n    }, []);\r\n\r\n    const byBook = async () => {\r\n        if(searchFiled != '') {\r\n            let json = await Api.getBookLocatesByBookName(searchFiled);\r\n            if(json.data[0] != null) {\r\n                setList(json.data);\r\n                setMessageEmpty('none');\r\n            } else {\r\n                setList([]);\r\n                setMessageEmpty('flex');\r\n            }\r\n        } else {\r\n            setSearchEmpty('flex');\r\n            wait(2000).then(()=>{ setSearchEmpty('none') })\r\n        }\r\n    };\r\n\r\n    const byUser = async () => {\r\n        if(userFiled != '') {\r\n            let json = await Api.getBookLocatesByUserName(userFiled);\r\n            if(json.data[0] != null) {\r\n                setList(json.data);\r\n                setMessageEmpty('none');\r\n            } else {\r\n                setList([]);\r\n                setMessageEmpty('flex');\r\n            }\r\n        } else {\r\n            setUserEmpty('flex');\r\n            wait(2000).then(()=>{ setUserEmpty('none') })\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        let isFlag = true;\r\n        Api.getBookLocates().then((response) => {\r\n            if(isFlag){\r\n                if(response.data[0] != null) {\r\n                    setList(response.data);\r\n                    setMessageEmpty('none');\r\n                }\r\n                else {\r\n                    setList([]);\r\n                    setMessageEmpty('flex');\r\n                }\r\n            }\r\n        }).catch((error) => {\r\n            alert('Erro inesperado, contate o adminstrador');\r\n        });\r\n        return () => { isFlag = false };\r\n    }, []);\r\n    return(\r\n        <ScrollView contentContainerStyle={{ flexGrow: 1, justifyContent: 'space-around', alignItems: 'center', backgroundColor: '#FFFFFF' }} horizontal={true}>\r\n            <View style={styles.pageBody}>\r\n                <Text style={{display: searchEmpty, color: '#000000', fontWeight: 'bold', marginBottom: 5}}>\r\n                Digite o nome do livro que deseja...\r\n                </Text>\r\n                <Text style={{display: userEmpty, color: '#000000', fontWeight: 'bold', marginBottom: 5}}>\r\n                Digite o nome do usuário que deseja...\r\n                </Text>\r\n                <View style={styles.inputArea}>\r\n                    <TextInput \r\n                        style={styles.input} \r\n                        placeholder=\"Pesquisar por livro\"\r\n                        placeholderTextColor=\"#000000\"\r\n                        value={searchFiled}\r\n                        onChangeText={t=>setSearchField(t)}\r\n                    />\r\n                    <TouchableOpacity style={styles.search} onPress={byBook}>\r\n                        <Search width=\"24\" height=\"24\" fill=\"#000000\" />\r\n                    </TouchableOpacity>\r\n                </View>\r\n                <View style={styles.inputArea}>\r\n                    <TextInput \r\n                        style={styles.input} \r\n                        placeholder=\"Pesquisar por usuário\"\r\n                        placeholderTextColor=\"#000000\"\r\n                        value={userFiled}\r\n                        onChangeText={t=>setUserField(t)}\r\n                    />\r\n                    <TouchableOpacity style={styles.search} onPress={byUser}>\r\n                        <Search width=\"24\" height=\"24\" fill=\"#000000\" />\r\n                    </TouchableOpacity>\r\n                </View>\r\n                <ScrollView \r\n                    contentContainerStyle={{ flexGrow: 1, justifyContent: 'flex-start', alignItems: 'center', backgroundColor: '#FFFFFF' }} \r\n                    horizontal={false} \r\n                    refreshControl={\r\n                        <RefreshControl \r\n                        refreshing={refreshing} \r\n                        onRefresh={onRefresh} \r\n                        />\r\n                    }\r\n                >\r\n                    {loading && \r\n                        <ActivityIndicator size=\"large\" color=\"#000000\"/>\r\n                    }\r\n                    <View style={styles.listArea}>\r\n                        {list.map((item, k) => (\r\n                            <BookAdmin key={k} data={item} />\r\n                        ))}\r\n                    </View>\r\n                    <View style={[styles.messageNotFound, {display: messageEmpty}]}>\r\n                        <NotFound width=\"60\" height=\"60\" fill=\"#FFFFFF\" />\r\n                        <Text style={{color: '#000000', fontWeight: 'bold', fontSize: 16, marginTop: 10}}>\r\n                        Busca não encontrada\r\n                        </Text>\r\n                    </View>\r\n                </ScrollView>\r\n            </View>\r\n        </ScrollView>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    pageBody: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        justifyContent: 'space-around',\r\n        backgroundColor: '#FFFFFF'\r\n    },\r\n    inputArea: {\r\n        width: 400,\r\n        height: 40,\r\n        backgroundColor: '#F5F5F5',\r\n        flexDirection: 'row',\r\n        borderRadius: 10,\r\n        paddingLeft: 15,\r\n        alignItems: 'center',\r\n        marginBottom: 10,\r\n        borderWidth: 2,\r\n        borderColor: '#000000'\r\n    },\r\n    input: {\r\n        flex: 1,\r\n        fontSize: 16,\r\n        color: '#000000',\r\n        marginLeft: 5\r\n    },\r\n    search: {\r\n        width: 24,\r\n        height: 24,\r\n        marginRight: 10\r\n    },\r\n    listArea: {\r\n        width: 400,\r\n    },\r\n    messageNotFound: {\r\n        width: 300,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}