{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\lucas\\\\Documents\\\\Programacao\\\\React-Native\\\\Project-E-MyBook\\\\src\\\\pages\\\\sub-pages\\\\forYou.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport { useNavigation } from '@react-navigation/native';\nimport Api from \"../../Api\";\nimport BookItem from \"../../components/BookItem\";\nimport FabButton from \"../../components/FabButton\";\nimport Search from \"../../assets/search.svg\";\nimport NotFound from \"../../assets/nao-encontrado.svg\";\n\nvar wait = function wait(timeout) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, timeout);\n  });\n};\n\nexport default function forYou() {\n  var _this = this;\n\n  var navigation = useNavigation();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      list = _useState2[0],\n      setList = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      searchFiled = _useState6[0],\n      setSearchField = _useState6[1];\n\n  var _useState7 = useState('none'),\n      _useState8 = _slicedToArray(_useState7, 2),\n      messageEmpty = _useState8[0],\n      setMessageEmpty = _useState8[1];\n\n  var _useState9 = useState('none'),\n      _useState10 = _slicedToArray(_useState9, 2),\n      searchEmpty = _useState10[0],\n      setSearchEmpty = _useState10[1];\n\n  var _useState11 = useState('none'),\n      _useState12 = _slicedToArray(_useState11, 2),\n      textEmpty = _useState12[0],\n      setTextEmpty = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      refreshing = _useState14[0],\n      setRefreshing = _useState14[1];\n\n  var onRefresh = React.useCallback(function () {\n    setRefreshing(true);\n    Api.getBooks().then(function (response) {\n      if (response.data[0] != null) {\n        setList(response.data);\n        setTextEmpty('none');\n        setMessageEmpty('none');\n      } else {\n        setList([]);\n        setMessageEmpty('flex');\n      }\n    }).catch(function (error) {\n      alert('Erro inesperado, contate o adminstrador');\n    });\n    wait(2000).then(function () {\n      return setRefreshing(false);\n    });\n  }, []);\n\n  function clearMsg() {\n    setSearchEmpty('none');\n    setMessageEmpty('none');\n  }\n\n  ;\n\n  var handleSearch = function handleSearch() {\n    var res;\n    return _regeneratorRuntime.async(function handleSearch$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            setList([]);\n\n            if (!(searchFiled != '')) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(Api.getBookByName(searchFiled, ''));\n\n          case 5:\n            res = _context.sent;\n\n            if (res.data[0] != null) {\n              setList(res.data);\n              setTextEmpty('none');\n              setMessageEmpty('none');\n            } else {\n              setList([]);\n              setMessageEmpty('flex');\n            }\n\n            _context.next = 10;\n            break;\n\n          case 9:\n            setSearchEmpty('flex');\n\n          case 10:\n            setLoading(false);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    var isFlag = true;\n    setList([]);\n    var unsubscribe = navigation.addListener('focus', function () {\n      Api.getBooks().then(function (response) {\n        if (response.data[0] != null) {\n          setList(response.data);\n          setTextEmpty('none');\n          setMessageEmpty('none');\n        } else {\n          setList([]);\n          setMessageEmpty('flex');\n        }\n      }).catch(function (error) {\n        alert('Erro inesperado, contate o adminstrador');\n      });\n    });\n    Api.getBooks().then(function (response) {\n      if (isFlag) {\n        if (response.data[0] != null) {\n          setList(response.data);\n          setTextEmpty('none');\n          setMessageEmpty('none');\n        } else {\n          setList([]);\n          setMessageEmpty('flex');\n        }\n      }\n    }).catch(function (error) {\n      alert('Erro inesperado, contate o adminstrador');\n    });\n    return function () {\n      isFlag = false, unsubscribe;\n    };\n  }, [], [navigation]);\n  return React.createElement(ScrollView, {\n    contentContainerStyle: {\n      flexGrow: 1,\n      justifyContent: 'space-around',\n      alignItems: 'center',\n      backgroundColor: '#FFFFFF'\n    },\n    horizontal: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.pageBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: {\n      display: searchEmpty,\n      color: '#000000',\n      fontWeight: 'bold',\n      marginBottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, \"Digite o nome do livro que deseja...\"), React.createElement(View, {\n    style: [styles.inputArea, {\n      display: textEmpty\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, React.createElement(TextInput, {\n    style: styles.input,\n    placeholder: \"Pesquise algum livro\",\n    placeholderTextColor: \"#000000\",\n    value: searchFiled,\n    onChangeText: function onChangeText(t) {\n      return setSearchField(t);\n    },\n    onFocus: function onFocus(t) {\n      return clearMsg();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: styles.search,\n    onPress: handleSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, React.createElement(Search, {\n    width: \"24\",\n    height: \"24\",\n    fill: \"#000000\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }))), React.createElement(ScrollView, {\n    contentContainerStyle: {\n      flexGrow: 1,\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      backgroundColor: '#FFFFFF'\n    },\n    horizontal: false,\n    refreshControl: React.createElement(RefreshControl, {\n      refreshing: refreshing,\n      onRefresh: onRefresh,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, loading && React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#000000\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }), React.createElement(View, {\n    style: styles.listArea,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, list.map(function (item, k) {\n    return React.createElement(BookItem, {\n      key: k,\n      data: item,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 29\n      }\n    });\n  })), React.createElement(View, {\n    style: [styles.messageNotFound, {\n      display: messageEmpty\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, React.createElement(NotFound, {\n    width: \"60\",\n    height: \"60\",\n    fill: \"#FFFFFF\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }), React.createElement(Text, {\n    style: {\n      color: '#000000',\n      fontWeight: 'bold',\n      fontSize: 16,\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, \"Busca n\\xE3o encontrada\"))), React.createElement(FabButton, {\n    style: {\n      bottom: 130,\n      right: 60\n    },\n    onPress: function onPress() {\n      textEmpty == 'none' ? setTextEmpty('flex') : setTextEmpty('none');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  })));\n}\nvar styles = StyleSheet.create({\n  pageBody: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'space-around',\n    backgroundColor: '#FFFFFF'\n  },\n  inputArea: {\n    width: 400,\n    height: 40,\n    backgroundColor: '#F5F5F5',\n    flexDirection: 'row',\n    borderRadius: 10,\n    paddingLeft: 15,\n    alignItems: 'center',\n    marginBottom: 10,\n    borderWidth: 2,\n    borderColor: '#000000'\n  },\n  input: {\n    flex: 1,\n    fontSize: 16,\n    color: '#000000',\n    marginLeft: 5\n  },\n  search: {\n    width: 24,\n    height: 24,\n    marginRight: 10\n  },\n  listArea: {\n    width: 400\n  },\n  messageNotFound: {\n    width: 300,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"sources":["C:/Users/lucas/Documents/Programacao/React-Native/Project-E-MyBook/src/pages/sub-pages/forYou.js"],"names":["React","useState","useEffect","useNavigation","Api","BookItem","FabButton","Search","NotFound","wait","timeout","Promise","resolve","setTimeout","forYou","navigation","list","setList","loading","setLoading","searchFiled","setSearchField","messageEmpty","setMessageEmpty","searchEmpty","setSearchEmpty","textEmpty","setTextEmpty","refreshing","setRefreshing","onRefresh","useCallback","getBooks","then","response","data","catch","error","alert","clearMsg","handleSearch","getBookByName","res","isFlag","unsubscribe","addListener","flexGrow","justifyContent","alignItems","backgroundColor","styles","pageBody","display","color","fontWeight","marginBottom","inputArea","input","t","search","listArea","map","item","k","messageNotFound","fontSize","marginTop","bottom","right","StyleSheet","create","flex","width","height","flexDirection","borderRadius","paddingLeft","borderWidth","borderColor","marginLeft","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, TextInput, ScrollView, StyleSheet, ActivityIndicator, TouchableOpacity, RefreshControl } from 'react-native';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport Api from '../../Api';\r\nimport BookItem from '../../components/BookItem';\r\nimport FabButton from '../../components/FabButton';\r\nimport Search from '../../assets/search.svg';\r\nimport NotFound from '../../assets/nao-encontrado.svg';\r\n\r\nconst wait = (timeout) => {\r\n    return new Promise(resolve => setTimeout(resolve, timeout));\r\n}\r\n\r\nexport default function forYou() {\r\n    const navigation = useNavigation();\r\n\r\n    const [list, setList] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [searchFiled, setSearchField] = useState('');\r\n    const [messageEmpty, setMessageEmpty] = useState('none');\r\n    const [searchEmpty, setSearchEmpty] = useState('none');\r\n    const [textEmpty, setTextEmpty] = useState('none');\r\n    const [refreshing, setRefreshing] = useState(false);\r\n\r\n    const onRefresh = React.useCallback(() => {\r\n        setRefreshing(true);\r\n        Api.getBooks().then((response) => {\r\n            if(response.data[0] != null) {\r\n                setList(response.data);\r\n                setTextEmpty('none');\r\n                setMessageEmpty('none');\r\n            }\r\n            else {\r\n                setList([]);\r\n                setMessageEmpty('flex');\r\n            }\r\n        }).catch((error) => {\r\n            alert('Erro inesperado, contate o adminstrador');\r\n        });\r\n        wait(2000).then(() => setRefreshing(false));\r\n    }, []);\r\n\r\n    function clearMsg(){\r\n    \tsetSearchEmpty('none');\r\n        setMessageEmpty('none');\r\n    };\r\n\r\n    const handleSearch = async () => {\r\n        setLoading(true);\r\n        setList([]);\r\n        if(searchFiled != ''){\r\n            let res = await Api.getBookByName(searchFiled, '');\r\n            if(res.data[0] != null) {\r\n                setList(res.data);\r\n                setTextEmpty('none');\r\n                setMessageEmpty('none');\r\n            }\r\n            else {\r\n                setList([]);\r\n                setMessageEmpty('flex');\r\n            }\r\n        } else {\r\n            setSearchEmpty('flex');\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        let isFlag = true;\r\n        setList([]);\r\n        const unsubscribe = navigation.addListener('focus', () => {\r\n            Api.getBooks().then((response) => {\r\n                if(response.data[0] != null) {\r\n                    setList(response.data);\r\n                    setTextEmpty('none');\r\n                    setMessageEmpty('none');\r\n                }\r\n                else {\r\n                    setList([]);\r\n                    setMessageEmpty('flex');\r\n                }\r\n            }).catch((error) => {\r\n                alert('Erro inesperado, contate o adminstrador');\r\n            });\r\n        });\r\n        Api.getBooks().then((response) => {\r\n            if(isFlag){\r\n                if(response.data[0] != null) {\r\n                    setList(response.data);\r\n                    setTextEmpty('none');\r\n                    setMessageEmpty('none');\r\n                }\r\n                else {\r\n                    setList([]);\r\n                    setMessageEmpty('flex');\r\n                }\r\n            }\r\n        }).catch((error) => {\r\n            alert('Erro inesperado, contate o adminstrador');\r\n        });\r\n        return () => { isFlag = false, unsubscribe };\r\n    }, [], [navigation]);\r\n\r\n    return (\r\n        <ScrollView contentContainerStyle={{ flexGrow: 1, justifyContent: 'space-around', alignItems: 'center', backgroundColor: '#FFFFFF' }} horizontal={true}>\r\n            <View style={styles.pageBody}>\r\n                <Text style={{display: searchEmpty, color: '#000000', fontWeight: 'bold', marginBottom: 5}}>\r\n                Digite o nome do livro que deseja...\r\n                </Text>\r\n                <View style={[styles.inputArea, { display: textEmpty }]}>\r\n                    <TextInput \r\n                        style={styles.input} \r\n                        placeholder=\"Pesquise algum livro\"\r\n                        placeholderTextColor=\"#000000\"\r\n                        value={searchFiled}\r\n                        onChangeText={t=>setSearchField(t)}\r\n                        onFocus={t=>clearMsg()}\r\n                    />\r\n                    <TouchableOpacity style={styles.search} onPress={handleSearch}>\r\n                        <Search width=\"24\" height=\"24\" fill=\"#000000\" />\r\n                    </TouchableOpacity>\r\n                </View>\r\n                <ScrollView \r\n                    contentContainerStyle={{ flexGrow: 1, justifyContent: 'flex-start', alignItems: 'center', backgroundColor: '#FFFFFF' }} \r\n                    horizontal={false} \r\n                    refreshControl={\r\n                        <RefreshControl \r\n                        refreshing={refreshing} \r\n                        onRefresh={onRefresh} \r\n                        />\r\n                    }\r\n                >\r\n                    {loading && \r\n                        <ActivityIndicator size=\"large\" color=\"#000000\"/>\r\n                    }\r\n                    <View style={styles.listArea}>\r\n                        {list.map((item, k) => (\r\n                            <BookItem key={k} data={item} />\r\n                        ))}\r\n                    </View>\r\n                    <View style={[styles.messageNotFound, {display: messageEmpty}]}>\r\n                        <NotFound width=\"60\" height=\"60\" fill=\"#FFFFFF\" />\r\n                        <Text style={{color: '#000000', fontWeight: 'bold', fontSize: 16, marginTop: 10}}>\r\n                        Busca não encontrada\r\n                        </Text>\r\n                    </View>\r\n                </ScrollView>\r\n                <FabButton style={{ bottom: 130, right: 60 }} onPress={()=>{ textEmpty == 'none' ? setTextEmpty('flex') : setTextEmpty('none')}}/>\r\n            </View>\r\n        </ScrollView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    pageBody: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        justifyContent: 'space-around',\r\n        backgroundColor: '#FFFFFF'\r\n    },\r\n    inputArea: {\r\n        width: 400,\r\n        height: 40,\r\n        backgroundColor: '#F5F5F5',\r\n        flexDirection: 'row',\r\n        borderRadius: 10,\r\n        paddingLeft: 15,\r\n        alignItems: 'center',\r\n        marginBottom: 10,\r\n        borderWidth: 2,\r\n        borderColor: '#000000'\r\n        \r\n    },\r\n    input: {\r\n        flex: 1,\r\n        fontSize: 16,\r\n        color: '#000000',\r\n        marginLeft: 5\r\n    },\r\n    search: {\r\n        width: 24,\r\n        height: 24,\r\n        marginRight: 10\r\n    },\r\n    listArea: {\r\n        width: 400,\r\n    },\r\n    messageNotFound: {\r\n        width: 300,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}